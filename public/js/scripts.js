$(function(){function t(){$("form.login p.error, form.register p.error").remove(),$("form.login input, form.register input").removeClass("error")}var r=!0;$(".switch-button").on("click",function(o){o.preventDefault(),$("input").val(""),$("p.error").remove(),$("input").removeClass("error"),r?(r=!1,$(".register").show("slow"),$(".login").hide()):(r=!0,$(".login").show("slow"),$(".register").hide())}),$("form.login input, form.register input").on("focus",function(){t()}),$(".register-button").on("click",function(o){o.preventDefault(),t();var r={login:$("#register-login").val(),password:$("#register-password").val(),passwordConfirm:$("#register-password-confirm").val()};console.log(r),$.ajax({type:"POST",data:JSON.stringify(r),contentType:"application/json",url:"/api/auth/register"}).done(function(o){console.log(o),o.ok?location.reload():($(".register h2").after("<p class='error'>"+o.error+"</p>"),o.fields&&o.fields.forEach(function(o){$("input[name="+o+"]").addClass("error")}))})}),$(".login-button").on("click",function(o){o.preventDefault(),t();var r={login:$("#login-login").val(),password:$("#login-password").val()};$.ajax({type:"POST",data:JSON.stringify(r),contentType:"application/json",url:"/api/auth/login"}).done(function(o){console.log(o),o.ok?location.reload():($(".login h2").after("<p class='error'>"+o.error+"</p>"),o.fields&&o.fields.forEach(function(o){$("input[name="+o+"]").addClass("error")}))})})}),$(function(){function t(){$(".task-form p.error").remove(),$(".task-form input, .task-form textarea").removeClass("error")}$(".task-form input, .task-form textarea").on("focus",function(){t()}),$(".publish-button").on("click",function(o){o.preventDefault(),t();var r={title:$("#task-title").val(),body:$("#task-body").val(),taskId:$("#task-id").val()};console.log(r),$.ajax({type:"POST",data:JSON.stringify(r),contentType:"application/json",url:"/task/add"}).done(function(o){console.log(o),o.ok?$(location).attr("href","/"):($(".task-form h2").after("<p class='error'>"+o.error+"</p>"),o.fields&&o.fields.forEach(function(o){$("#task-"+o).addClass("error")}))})}),$(".delete-button").on("click",function(){var o={taskId:$("#delete-task").val()};console.log(o),$.ajax({type:"POST",data:JSON.stringify(o),contentType:"application/json",url:"/task/delete"}).done(function(o){console.log(o),o.ok?$(location).attr("href","/"):console.log("false")})}),$(".shareTask").on("click",function(){var o={taskId:$("#task-share").val(),userId:$("#user-share").val()};console.log(o),$.ajax({type:"POST",data:JSON.stringify(o),contentType:"application/json",url:"/task/share"}).done(function(o){console.log(o),o.ok,$(location).attr("href","/")})})});